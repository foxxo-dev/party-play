<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Oops, there's a problem.</title>
    <link rel="stylesheet" href="../styles/reset.css" />
    <style>
      .gradient-txt {
        background: linear-gradient(45deg, rgb(255, 70, 24), rgb(255, 240, 28));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
    </style>
  </head>
  <body>
    <h1>
      We have encountered a <span class="gradient-txt">problem</span> with the
      spotify data.
    </h1>
    <h2>
      This is not common, we recomend you go
      <a href="/become-host/index.html">back to the auth page again.</a>
    </h2>
    <p id="error_container"></p>
  </body>
  <script type="module">
    import { parseURLParams } from '../js/params-parser.js';

    console.log(parseURLParams(window.location.href));
    const { error, state } = parseURLParams(window.location.href);

    document.getElementById(
      'error_container'
    ).innerText = `Error: ${error}! Code: ${state}`;
    if (error == 'token-expired') {
      document.querySelector('h2 > a').href = '../index.html';
      document.querySelector('h2 > a').innerText = 'back to the home page and retry.';
    }
  </script>
</html>
